{"version":3,"sources":["GlobalStyle.ts","NFTForm.tsx","ManageListModal.tsx","TokenList.tsx","App.tsx","index.tsx"],"names":["GlobalStyle","createGlobalStyle","avertaFont","avertaBoldFont","NFTForm","tokenID","tokenContractAddress","onTokenIDChanged","onTokenContractAddressChanged","id","label","value","onChange","e","target","input","type","pattern","min","SearchInput","styled","theme","fonts","fontFamily","BodyHeader","div","colors","separator","SearchContainer","StyledItem","StyledImage","img","StyledImageName","FormContainer","TextDesc","Text","UnstyledButton","button","StyledDivider","Divider","ManageList","title","itemList","showDeleteButton","defaultIconUrl","formBody","addButtonLabel","isSubmitFormDisabled","onSubmitForm","onItemToggle","onItemDeleted","onClose","useState","search","setSearch","isFormMode","setIsFormMode","setDefaultImage","onerror","src","body","size","event","placeholder","color","variant","onClick","length","filter","i","name","toLowerCase","includes","description","map","alt","onError","iconUrl","strong","checked","orientation","disabled","isDeletable","footer","okText","okDisabled","handleCancel","handleOk","withoutBodyPadding","loadTokenAssets","tokens","a","seaport","OpenSeaPort","InfuraProvider","Promise","all","token","api","getAsset","tokenAddress","contractAddress","tokenId","toString","assets","TokenList","useQuery","isLoading","data","error","alert","undefined","Error","buildCellsForRow","asset","cheapestOrder","_","minBy","sellOrders","order","basePrice","toNumber","content","formatEther","imageUrl","rows","cells","Container","SafeApp","useSafeAppsSDK","sdk","safe","isOpen","setIsOpen","setTokens","inputTokenID","setInputTokenID","inputTokenContractAddress","setInputTokenContractAddress","setIsLoading","submitTx","useCallback","openseaBulkPurchaser","OpenseaBulkPurchaser","getDefaultProvider","createSingleTokenPurchase","safeAddress","purchaseTxs","createBatchTransactionFromPurchases","batchTx","txs","send","to","BigNumber","from","console","ManageListModal","Array","entries","index","itemId","newTokens","splice","queryClient","QueryClient","ReactDOM","render","StrictMode","loader","client","App","document","getElementById"],"mappings":"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","file":"static/js/main.989b4e76.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components'\nimport avertaFont from '@gnosis.pm/safe-react-components/dist/fonts/averta-normal.woff2'\nimport avertaBoldFont from '@gnosis.pm/safe-react-components/dist/fonts/averta-bold.woff2'\n\nconst GlobalStyle = createGlobalStyle`\n    html {\n        height: 100%\n    }\n\n    body {\n       height: 100%;\n       margin: 0px;\n       padding: 0px;\n    }\n\n    #root {\n        height: 100%;\n        padding-right: 0.5rem;\n    }\n\n    .MuiFormControl-root,\n    .MuiInputBase-root {\n        width: 100% !important;\n    }\n\n    @font-face {\n        font-family: 'Averta';\n        src: local('Averta'), local('Averta Bold'),\n        url(${avertaFont}) format('woff2'),\n        url(${avertaBoldFont}) format('woff');\n    }\n`\n\nexport default GlobalStyle\n","import { TextField } from \"@gnosis.pm/safe-react-components\";\n\ntype Props = {\n    tokenID: string,\n    tokenContractAddress: string,\n    onTokenIDChanged: (tokenID: string) => void,\n    onTokenContractAddressChanged: (tokenContractAddress: string) => void,\n};\n\nconst NFTForm = ({tokenID, tokenContractAddress, onTokenIDChanged, onTokenContractAddressChanged}: Props): React.ReactElement => {\n    return <>\n        <TextField\n            id=\"standard-name\"\n            label=\"Token Contract Address\"\n            value={tokenContractAddress}\n            onChange={(e) => onTokenContractAddressChanged(e.target.value)}\n            input={{ type: 'text', pattern: \"[A-Za-z]{3}\" }}\n        />\n        <br />\n        <TextField\n            id=\"standard-name\"\n            label=\"Token ID\"\n            value={tokenID}\n            onChange={(e) => onTokenIDChanged(e.target.value)}\n            input={{ type: 'number', min: 0  }}\n        />\n    </>\n}\n\nexport default NFTForm;\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { Divider } from '@gnosis.pm/safe-react-components';\n\nimport {\n  GenericModal,\n  Icon,\n  Text,\n  Button,\n  Switch,\n  ModalFooterConfirmation,\n} from '@gnosis.pm/safe-react-components';\n\nconst SearchInput = styled.input`\n  border: none;\n  background-color: transparent;\n  box-shadow: none;\n  font-family: ${({ theme }) => theme.fonts.fontFamily};\n  width: 250px;\n\n  :focus {\n    outline: none;\n  }\n`;\n\nconst BodyHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 2px solid ${({ theme }) => theme.colors.separator};\n  padding: 0 24px;\n`;\n\nconst SearchContainer = styled.div`\n  display: flex;\n  align-items: center;\n  height: 52px;\n  border-right: 2px solid ${({ theme }) => theme.colors.separator};\n`;\n\nconst StyledItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 24px;\n  height: 51px;\n  border-bottom: 2px solid ${({ theme }) => theme.colors.separator};\n\n  :last-child {\n    border-bottom: 0px;\n  }\n`;\n\nconst StyledImage = styled.img`\n  width: 26px;\n  height: 26px;\n  object-fit: contain;\n  margin: 0 16px 0 0;\n`;\n\nconst StyledImageName = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst FormContainer = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 24px;\n`;\n\nconst TextDesc = styled(Text)`\n  width: 350px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nconst UnstyledButton = styled.button`\n  background: none;\n  color: inherit;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  outline-color: ${({ theme }) => theme.colors.separator};\n`;\n\nconst StyledDivider = styled(Divider)`\n  height: 30px;\n`;\n\ntype Props = {\n  title?: string;\n  defaultIconUrl: string;\n  showDeleteButton?: boolean;\n  itemList: Array<{\n    id: number | string;\n    iconUrl: string;\n    name: string;\n    description?: string;\n    checked: boolean;\n    isDeletable?: boolean;\n  }>;\n  addButtonLabel?: string;\n  formBody: React.ReactNode;\n  isSubmitFormDisabled?: boolean;\n  onSubmitForm: () => void;\n  onItemToggle: (itemId: number | string, checked: boolean) => void;\n  onItemDeleted?: (itemId: number | string) => void;\n  onClose: () => void;\n};\n\nconst ManageList = ({\n  title = 'Manage List',\n  itemList,\n  showDeleteButton,\n  defaultIconUrl,\n  formBody,\n  addButtonLabel = 'add',\n  isSubmitFormDisabled = false,\n  onSubmitForm,\n  onItemToggle,\n  onItemDeleted,\n  onClose,\n}: Props): JSX.Element => {\n  const [search, setSearch] = useState('');\n  const [isFormMode, setIsFormMode] = useState(false);\n\n  const setDefaultImage = (e: React.SyntheticEvent<HTMLImageElement>): void => {\n    (e.target as HTMLImageElement).onerror = null;\n    (e.target as HTMLImageElement).src = defaultIconUrl;\n  };\n\n  const getFilteredItemList = () => {\n    if (!search || !search.length) {\n      return itemList;\n    }\n\n    return itemList.filter(\n      (i) =>\n        i.name.toLowerCase().includes(search.toLowerCase()) ||\n        i.description?.toLowerCase().includes(search.toLowerCase())\n    );\n  };\n\n  const getBody = () => {\n    return isFormMode ? (\n      <FormContainer>{formBody}</FormContainer>\n    ) : (\n      <>\n        <BodyHeader>\n          <SearchContainer>\n            <Icon size=\"md\" type=\"search\" />\n            <SearchInput\n              onChange={(event) => setSearch(event.target.value)}\n              placeholder=\"Search\"\n              value={search}\n            />\n          </SearchContainer>\n          <Button\n            size=\"md\"\n            color=\"primary\"\n            variant=\"contained\"\n            onClick={() => setIsFormMode(!isFormMode)}>\n            <Text size=\"lg\" color=\"white\">\n              + {addButtonLabel}\n            </Text>\n          </Button>\n        </BodyHeader>\n        <div>\n          {getFilteredItemList().map((i) => {\n            const onChange = (checked: boolean) => onItemToggle(i.id, checked);\n            const onDeleteClick = () => onItemDeleted?.(i.id);\n\n            return (\n              <StyledItem key={i.id}>\n                {/* Item description */}\n                <StyledImageName>\n                  <StyledImage\n                    alt={i.name}\n                    onError={setDefaultImage}\n                    src={i.iconUrl}\n                  />\n                  <div>\n                    <div>\n                      <Text size=\"lg\" strong>\n                        {i.name}\n                      </Text>\n                    </div>\n                    <div>\n                      <TextDesc size=\"md\">\n                        {i.description && i.description}\n                      </TextDesc>\n                    </div>\n                  </div>\n                </StyledImageName>\n\n                {/* Switch */}\n                <Switch checked={i.checked} onChange={onChange} />\n\n                {/* Delete button */}\n                {showDeleteButton && (\n                  <>\n                    <StyledDivider orientation=\"vertical\" />\n                    <UnstyledButton\n                      onClick={onDeleteClick}\n                      disabled={!i.isDeletable}>\n                      <Icon\n                        size=\"md\"\n                        color={i.isDeletable ? 'error' : 'icon'}\n                        type=\"delete\"\n                      />\n                    </UnstyledButton>\n                  </>\n                )}\n              </StyledItem>\n            );\n          })}\n        </div>\n      </>\n    );\n  };\n\n  const getFooter = () => {\n    return !isFormMode ? null : (\n      <ModalFooterConfirmation\n        okText=\"Save\"\n        okDisabled={isSubmitFormDisabled}\n        handleCancel={() => setIsFormMode(false)}\n        handleOk={() => {\n          setIsFormMode(false);\n          onSubmitForm();\n        }}\n      />\n    );\n  };\n\n  return (\n    <GenericModal\n      onClose={onClose}\n      title={title}\n      body={getBody()}\n      footer={getFooter()}\n      withoutBodyPadding\n    />\n  );\n};\n\nexport default ManageList;\n","import { Loader, Table, TableAlignment, TableRow, Text } from \"@gnosis.pm/safe-react-components\"\nimport { TokenDescription } from \"./types\"\nimport { OpenSeaPort } from \"opensea-js\";\nimport { OpenSeaAsset } from \"opensea-js/lib/types\";\nimport { formatEther } from \"@ethersproject/units\";\nimport { InfuraProvider } from \"@ethersproject/providers\";\nimport { useQuery } from 'react-query';\nimport _ from \"lodash\";\n\ntype Props = {\n    tokens: Array<TokenDescription>\n}\n\ntype RowCell = {\n    id?: string;\n    alignment?: TableAlignment;\n    content: React.ReactNode;\n};\n\nconst loadTokenAssets = async (tokens: TokenDescription[]) => {\n    const seaport = new OpenSeaPort(new InfuraProvider());\n    const assets = await Promise.all(tokens.map((token: TokenDescription) => {\n        return seaport.api.getAsset({tokenAddress: token.contractAddress, tokenId: token.id.toString()})\n    }));\n    return assets;\n}\n\nconst TokenList = ({tokens}: Props): React.ReactElement => {\n    const { isLoading, data, error } = useQuery(['loadTokenAssets', tokens], () => loadTokenAssets(tokens))\n    if (isLoading) {\n        return <Loader size=\"lg\" />\n    }\n    if (error) {\n        alert(error);\n        return <></>;\n    }\n    if (data === undefined) {\n        throw new Error(\"data is undefined\")\n    }\n\n    const buildTableRows = (): TableRow[] => {\n        return data.map((asset): TableRow => {\n            return {\n                id: asset.tokenId ?? \"\",\n                cells: buildCellsForRow(asset),\n            }\n        })\n    }\n\n    const buildCellsForRow = (asset: OpenSeaAsset): RowCell[] => {\n        const cheapestOrder = _.minBy(asset.sellOrders, (order) =>\n            order.basePrice.toNumber()\n        );\n        return [{\n            content: <Text size=\"lg\">{asset.name}</Text>\n        }, {\n            content: <Text size=\"lg\">Price: Îž{formatEther(cheapestOrder?.basePrice.toString() ?? \"-1\").toString()}</Text>\n        },{\n            content: <img src={asset.imageUrl} alt={asset.imageUrl} />\n        }];\n    }\n\n    return <>\n        <Table rows={buildTableRows()} />\n    </>\n}\n\nexport default TokenList","import React, { useCallback, useState } from 'react'\nimport styled from 'styled-components'\nimport { Button, Divider, Loader, Title } from '@gnosis.pm/safe-react-components'\nimport { useSafeAppsSDK } from '@gnosis.pm/safe-apps-react-sdk'\nimport OpenseaBulkPurchaser from '@gsgalloway/opensea-bulk-purchaser';\nimport { BigNumber, getDefaultProvider } from 'ethers';\nimport NFTForm from './NFTForm';\nimport ManageListModal from './ManageListModal';\nimport TokenList from './TokenList';\nimport { TokenDescription } from './types';\n\nconst Container = styled.div`\n  padding: 1rem;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`\n\n\n\nconst SafeApp = (): React.ReactElement => {\n  const { sdk, safe } = useSafeAppsSDK()\n  const [isOpen, setIsOpen] = useState(false);\n  const [tokens, setTokens] = useState<TokenDescription[]>([])\n  const [inputTokenID, setInputTokenID] = useState('');\n  const [inputTokenContractAddress, setInputTokenContractAddress] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const onNFTFormSubmitted = () => {\n    setTokens([...tokens, {id: BigNumber.from(inputTokenID), contractAddress: inputTokenContractAddress}])\n  }\n\n  const onItemDeleted = (itemId: number | string): void => {\n    if (typeof(itemId) === 'string') {\n      throw new Error(`itemID ${itemId} should be number`)\n    }\n    const newTokens = [...tokens];\n    newTokens.splice(itemId, 1)\n    setTokens(newTokens);\n  }\n\n\n  const getListItems = () => {\n    return Array.from(tokens.entries()).map(([index, token]) => {\n      return {\n            id: index,\n            iconUrl: 'someUrl',\n            name: `${token.id}`,\n            description: `Token at ${token.contractAddress}`,\n            checked: true,\n            isDeletable: true,\n      };\n    })\n  }\n\n  const submitTx = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      const openseaBulkPurchaser = new OpenseaBulkPurchaser(getDefaultProvider());\n      const purchaseTxs = await Promise.all(tokens.map(token => {\n        return openseaBulkPurchaser.createSingleTokenPurchase(token.id, token.contractAddress, safe.safeAddress)\n      }));\n\n      const batchTx = await openseaBulkPurchaser.createBatchTransactionFromPurchases(purchaseTxs, safe.safeAddress);\n      setIsLoading(false);\n      await sdk.txs.send({\n        txs: [{\n          to: batchTx.to,\n          value: BigNumber.from(batchTx.value).toString(),\n          data: batchTx.data,\n        }]\n      })\n    }\n    catch (e) {\n      console.error(e);\n    }\n  }, [tokens, safe, sdk])\n\n  return (\n    <Container>\n      {isLoading && (\n        <Loader size={\"lg\"} />\n      )}\n\n      <Title size=\"md\">New Batch OpenSea Purchase</Title>\n\n      <TokenList tokens={tokens}/>\n\n      <Button size=\"lg\" color=\"primary\" onClick={() => setIsOpen(!isOpen)}>\n        Select NFTs\n      </Button>\n      {isOpen && (\n        <ManageListModal\n          title={\"Add Token\"}\n          defaultIconUrl={\"https://opensea.io/static/images/logos/opensea.svg\"}\n          itemList={getListItems()}\n          showDeleteButton\n          addButtonLabel=\"Add token to batch\"\n          formBody={<NFTForm\n            tokenID={inputTokenID}\n            tokenContractAddress={inputTokenContractAddress}\n            onTokenIDChanged={setInputTokenID}\n            onTokenContractAddressChanged={setInputTokenContractAddress}\n          />}\n          onSubmitForm={onNFTFormSubmitted}\n          onClose={() => setIsOpen(false)}\n          onItemToggle={() => undefined}\n          onItemDeleted={onItemDeleted}\n        />\n      )}\n\n      <Divider />\n\n      <Button size=\"lg\" color=\"primary\" onClick={submitTx}>\n        Construct Batch Transaction\n      </Button>\n\n    </Container>\n  )\n}\n\nexport default SafeApp\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { ThemeProvider } from 'styled-components'\nimport { theme, Loader, Title } from '@gnosis.pm/safe-react-components'\nimport SafeProvider from '@gnosis.pm/safe-apps-react-sdk'\nimport {\n  QueryClient,\n  QueryClientProvider,\n} from 'react-query';\n\nimport GlobalStyle from './GlobalStyle'\nimport App from './App'\n\nconst queryClient = new QueryClient()\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <GlobalStyle />\n      <SafeProvider\n        loader={\n          <>\n            <Title size=\"md\">Waiting for Safe...</Title>\n            <Loader size=\"md\" />\n          </>\n        }\n      >\n        <QueryClientProvider client={queryClient}>\n          <App />\n        </QueryClientProvider>\n      </SafeProvider>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}