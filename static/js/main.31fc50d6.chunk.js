(this["webpackJsonpopensea-batch-purchase-react"]=this["webpackJsonpopensea-batch-purchase-react"]||[]).push([[0],{435:function(e,n){},442:function(e,n){},464:function(e,n){},466:function(e,n){},478:function(e,n){},479:function(e,n){},494:function(e,n){},500:function(e,n){},503:function(e,n){},505:function(e,n){},518:function(e,n){},520:function(e,n){},757:function(e,n,t){"use strict";t.r(n);var r,o,c,i,a,s,d,l,u,j,b,f,h,x=t(0),O=t.n(x),p=t(36),m=t.n(p),g=t(49),v=t(34),k=t(221),w=t.n(k),y=t(180),C=t(57),T=t(376),A=t(377),S=Object(g.createGlobalStyle)(r||(r=Object(C.a)(["\n    html {\n        height: 100%\n    }\n\n    body {\n       height: 100%;\n       margin: 0px;\n       padding: 0px;\n    }\n\n    #root {\n        height: 100%;\n        padding-right: 0.5rem;\n    }\n\n    .MuiFormControl-root,\n    .MuiInputBase-root {\n        width: 100% !important;\n    }\n\n    @font-face {\n        font-family: 'Averta';\n        src: local('Averta'), local('Averta Bold'),\n        url(",") format('woff2'),\n        url(",") format('woff');\n    }\n"])),T.a,A.a),I=t(4),D=t.n(I),z=t(102),B=t(113),F=t(77),P=t(381),L=t(19),E=t(122),U=t(15),M=g.default.div(o||(o=Object(C.a)(["\n  padding: 1rem;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]))),N=function(e){var n=e.tokenID,t=e.tokenContractAddress,r=e.onTokenIDChanged,o=e.onTokenContractAddressChanged;return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(M,{children:[Object(U.jsxs)(v.Text,{size:"lg",children:["Enter token ID (a number) and the token's contract address ",Object(U.jsx)("br",{}),"Ex: '0x059edd72cd353df5106d2b9cc5ab83a52287ac3a' for Artblocks"]}),Object(U.jsx)("br",{}),Object(U.jsx)(v.TextField,{id:"standard-name",label:"Token Contract Address",value:t,onChange:function(e){return o(e.target.value)},input:{type:"text",pattern:"[A-Za-z]{3}"}}),Object(U.jsx)("br",{}),Object(U.jsx)(v.TextField,{id:"standard-name",label:"Token ID",value:n,onChange:function(e){return r(e.target.value)},input:{type:"number",min:0}})]})})},_=g.default.input(c||(c=Object(C.a)(["\n  border: none;\n  background-color: transparent;\n  box-shadow: none;\n  font-family: ",";\n  width: 250px;\n\n  :focus {\n    outline: none;\n  }\n"])),(function(e){return e.theme.fonts.fontFamily})),K=g.default.div(i||(i=Object(C.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 2px solid ",";\n  padding: 0 24px;\n"])),(function(e){return e.theme.colors.separator})),Q=g.default.div(a||(a=Object(C.a)(["\n  display: flex;\n  align-items: center;\n  height: 52px;\n  border-right: 2px solid ",";\n"])),(function(e){return e.theme.colors.separator})),G=g.default.div(s||(s=Object(C.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 24px;\n  height: 51px;\n  border-bottom: 2px solid ",";\n\n  :last-child {\n    border-bottom: 0px;\n  }\n"])),(function(e){return e.theme.colors.separator})),J=g.default.img(d||(d=Object(C.a)(["\n  width: 26px;\n  height: 26px;\n  object-fit: contain;\n  margin: 0 16px 0 0;\n"]))),R=g.default.div(l||(l=Object(C.a)(["\n  display: flex;\n  align-items: center;\n"]))),W=g.default.div(u||(u=Object(C.a)(["\n  display: flex;\n  align-items: center;\n  padding: 24px;\n"]))),Y=Object(g.default)(v.Text)(j||(j=Object(C.a)(["\n  width: 350px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),Z=g.default.button(b||(b=Object(C.a)(["\n  background: none;\n  color: inherit;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  outline-color: ",";\n"])),(function(e){return e.theme.colors.separator})),q=Object(g.default)(v.Divider)(f||(f=Object(C.a)(["\n  height: 30px;\n"]))),H=function(e){var n=e.title,t=void 0===n?"Manage List":n,r=e.itemList,o=e.showDeleteButton,c=e.defaultIconUrl,i=e.formBody,a=e.addButtonLabel,s=void 0===a?"add":a,d=e.isSubmitFormDisabled,l=void 0!==d&&d,u=e.onSubmitForm,j=e.onItemToggle,b=e.onItemDeleted,f=e.onClose,h=Object(x.useState)(""),O=Object(F.a)(h,2),p=O[0],m=O[1],g=Object(x.useState)(!1),k=Object(F.a)(g,2),w=k[0],y=k[1],C=function(e){e.target.onerror=null,e.target.src=c};return Object(U.jsx)(v.GenericModal,{onClose:f,title:t,body:w?Object(U.jsx)(W,{children:i}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(K,{children:[Object(U.jsxs)(Q,{children:[Object(U.jsx)(v.Icon,{size:"md",type:"search"}),Object(U.jsx)(_,{onChange:function(e){return m(e.target.value)},placeholder:"Search",value:p})]}),Object(U.jsx)(v.Button,{size:"md",color:"primary",variant:"contained",onClick:function(){return y(!w)},children:Object(U.jsxs)(v.Text,{size:"lg",color:"white",children:["+ ",s]})})]}),Object(U.jsx)("div",{children:(p&&p.length?r.filter((function(e){var n;return e.name.toLowerCase().includes(p.toLowerCase())||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(p.toLowerCase()))})):r).map((function(e){return Object(U.jsxs)(G,{children:[Object(U.jsxs)(R,{children:[Object(U.jsx)(J,{alt:e.name,onError:C,src:e.iconUrl}),Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:Object(U.jsx)(v.Text,{size:"lg",strong:!0,children:e.name})}),Object(U.jsx)("div",{children:Object(U.jsx)(Y,{size:"md",children:e.description&&e.description})})]})]}),Object(U.jsx)(v.Switch,{checked:e.checked,onChange:function(n){return j(e.id,n)}}),o&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(q,{orientation:"vertical"}),Object(U.jsx)(Z,{onClick:function(){return null===b||void 0===b?void 0:b(e.id)},disabled:!e.isDeletable,children:Object(U.jsx)(v.Icon,{size:"md",color:e.isDeletable?"error":"icon",type:"delete"})})]})]},e.id)}))})]}),footer:w?Object(U.jsx)(v.ModalFooterConfirmation,{okText:"Save",okDisabled:l,handleCancel:function(){return y(!1)},handleOk:function(){y(!1),u()}}):null,withoutBodyPadding:!0})},V=t(380),X=t(80),$=t(199),ee=t(41),ne=t.n(ee),te=function(){var e=Object(z.a)(D.a.mark((function e(n){var t,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new V.OpenSeaPort(new $.a),e.next=3,Promise.all(n.map((function(e){return t.api.getAsset({tokenAddress:e.contractAddress,tokenId:e.id.toString()})})));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),re=function(e){var n=e.tokens,t=Object(y.useQuery)(["loadTokenAssets",n],(function(){return te(n)})),r=t.isLoading,o=t.data,c=t.error;if(r)return Object(U.jsx)(v.Loader,{size:"lg"});if(c)return alert(c),Object(U.jsx)(U.Fragment,{});if(void 0===o)throw new Error("data is undefined");var i=function(e){var n,t=ne.a.minBy(e.sellOrders,(function(e){return e.basePrice.toNumber()}));return[{content:Object(U.jsx)(v.Text,{size:"lg",children:e.name})},{content:Object(U.jsxs)(v.Text,{size:"lg",children:["Price: \u039e",Object(X.b)(null!==(n=null===t||void 0===t?void 0:t.basePrice.toString())&&void 0!==n?n:"-1").toString()]})},{content:Object(U.jsx)("img",{src:e.imageUrl,alt:e.imageUrl})}]};return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(v.Table,{rows:o.map((function(e){var n;return{id:null!==(n=e.tokenId)&&void 0!==n?n:"",cells:i(e)}}))})})},oe=g.default.div(h||(h=Object(C.a)(["\n  padding: 1rem;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]))),ce=function(){var e=Object(k.useSafeAppsSDK)(),n=e.sdk,t=e.safe,r=Object(x.useState)(!1),o=Object(F.a)(r,2),c=o[0],i=o[1],a=Object(x.useState)([]),s=Object(F.a)(a,2),d=s[0],l=s[1],u=Object(x.useState)(""),j=Object(F.a)(u,2),b=j[0],f=j[1],h=Object(x.useState)(""),O=Object(F.a)(h,2),p=O[0],m=O[1],g=Object(x.useState)(!1),w=Object(F.a)(g,2),y=w[0],C=w[1],T=Object(x.useCallback)(Object(z.a)(D.a.mark((function e(){var n,t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,C(!0),n="6c2cf7754b5e4819be2c0e3827382766"){e.next=5;break}throw new Error("must define REACT_APP_OPENSEA_API_KEY");case 5:t=new P.a(Object(E.getDefaultProvider)(),{openseaApiKey:n}),console.log("I'm here!",t,n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[d,t,n]);return Object(U.jsxs)(oe,{children:[y&&Object(U.jsx)(v.Loader,{size:"lg"}),Object(U.jsx)(v.Title,{size:"md",children:"New Batch OpenSea Purchase"}),d.length>0&&Object(U.jsx)(v.Card,{children:Object(U.jsx)(re,{tokens:d})}),Object(U.jsx)(v.Button,{size:"lg",color:"primary",onClick:function(){return i(!c)},children:"1. Select NFTs"}),c&&Object(U.jsx)(H,{title:"Add Token",defaultIconUrl:"https://opensea.io/static/images/logos/opensea.svg",itemList:Array.from(d.entries()).map((function(e){var n=Object(F.a)(e,2),t=n[0],r=n[1];return{id:t,iconUrl:"someUrl",name:"".concat(r.id),description:"Token at ".concat(r.contractAddress),checked:!0,isDeletable:!0}})),showDeleteButton:!0,addButtonLabel:"Add token to batch",formBody:Object(U.jsx)(N,{tokenID:b,tokenContractAddress:p,onTokenIDChanged:f,onTokenContractAddressChanged:m}),onSubmitForm:function(){l([].concat(Object(B.a)(d),[{id:L.a.from(b),contractAddress:p}]))},onClose:function(){return i(!1)},onItemToggle:function(){},onItemDeleted:function(e){if("string"===typeof e)throw new Error("itemID ".concat(e," should be number"));var n=Object(B.a)(d);n.splice(e,1),l(n)}}),Object(U.jsx)(v.Divider,{}),Object(U.jsx)(v.Button,{size:"lg",color:"primary",onClick:T,children:"2. Construct Batch Transaction"})]})},ie=new y.QueryClient;m.a.render(Object(U.jsx)(O.a.StrictMode,{children:Object(U.jsxs)(g.ThemeProvider,{theme:v.theme,children:[Object(U.jsx)(S,{}),Object(U.jsx)(w.a,{loader:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.Title,{size:"md",children:"Waiting for Safe..."}),Object(U.jsx)(v.Loader,{size:"md"})]}),children:Object(U.jsx)(y.QueryClientProvider,{client:ie,children:Object(U.jsx)(ce,{})})})]})}),document.getElementById("root"))}},[[757,1,2]]]);
//# sourceMappingURL=main.31fc50d6.chunk.js.map