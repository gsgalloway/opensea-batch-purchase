(this["webpackJsonpopensea-batch-purchase-react"]=this["webpackJsonpopensea-batch-purchase-react"]||[]).push([[0],{435:function(e,t){},442:function(e,t){},464:function(e,t){},466:function(e,t){},478:function(e,t){},479:function(e,t){},494:function(e,t){},500:function(e,t){},503:function(e,t){},505:function(e,t){},518:function(e,t){},520:function(e,t){},757:function(e,t,n){"use strict";n.r(t);var r,o,c,i,a,s,d,l,u,j,b,f,h=n(0),x=n.n(h),O=n(35),m=n.n(O),p=n(53),g=n(37),v=n(221),k=n.n(v),w=n(180),y=n(60),C=n(376),T=n(377),S=Object(p.createGlobalStyle)(r||(r=Object(y.a)(["\n    html {\n        height: 100%\n    }\n\n    body {\n       height: 100%;\n       margin: 0px;\n       padding: 0px;\n    }\n\n    #root {\n        height: 100%;\n        padding-right: 0.5rem;\n    }\n\n    .MuiFormControl-root,\n    .MuiInputBase-root {\n        width: 100% !important;\n    }\n\n    @font-face {\n        font-family: 'Averta';\n        src: local('Averta'), local('Averta Bold'),\n        url(",") format('woff2'),\n        url(",") format('woff');\n    }\n"])),C.a,T.a),A=n(4),D=n.n(A),I=n(102),B=n(113),z=n(77),F=n(381),L=n(19),P=n(122),U=n(17),M=function(e){var t=e.tokenID,n=e.tokenContractAddress,r=e.onTokenIDChanged,o=e.onTokenContractAddressChanged;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(g.TextField,{id:"standard-name",label:"Token Contract Address",value:n,onChange:function(e){return o(e.target.value)},input:{type:"text",pattern:"[A-Za-z]{3}"}}),Object(U.jsx)("br",{}),Object(U.jsx)(g.TextField,{id:"standard-name",label:"Token ID",value:t,onChange:function(e){return r(e.target.value)},input:{type:"number",min:0}})]})},E=p.default.input(o||(o=Object(y.a)(["\n  border: none;\n  background-color: transparent;\n  box-shadow: none;\n  font-family: ",";\n  width: 250px;\n\n  :focus {\n    outline: none;\n  }\n"])),(function(e){return e.theme.fonts.fontFamily})),N=p.default.div(c||(c=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 2px solid ",";\n  padding: 0 24px;\n"])),(function(e){return e.theme.colors.separator})),Q=p.default.div(i||(i=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  height: 52px;\n  border-right: 2px solid ",";\n"])),(function(e){return e.theme.colors.separator})),G=p.default.div(a||(a=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 24px;\n  height: 51px;\n  border-bottom: 2px solid ",";\n\n  :last-child {\n    border-bottom: 0px;\n  }\n"])),(function(e){return e.theme.colors.separator})),J=p.default.img(s||(s=Object(y.a)(["\n  width: 26px;\n  height: 26px;\n  object-fit: contain;\n  margin: 0 16px 0 0;\n"]))),K=p.default.div(d||(d=Object(y.a)(["\n  display: flex;\n  align-items: center;\n"]))),W=p.default.div(l||(l=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  padding: 24px;\n"]))),Z=Object(p.default)(g.Text)(u||(u=Object(y.a)(["\n  width: 350px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),q=p.default.button(j||(j=Object(y.a)(["\n  background: none;\n  color: inherit;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  outline-color: ",";\n"])),(function(e){return e.theme.colors.separator})),H=Object(p.default)(g.Divider)(b||(b=Object(y.a)(["\n  height: 30px;\n"]))),R=function(e){var t=e.title,n=void 0===t?"Manage List":t,r=e.itemList,o=e.showDeleteButton,c=e.defaultIconUrl,i=e.formBody,a=e.addButtonLabel,s=void 0===a?"add":a,d=e.isSubmitFormDisabled,l=void 0!==d&&d,u=e.onSubmitForm,j=e.onItemToggle,b=e.onItemDeleted,f=e.onClose,x=Object(h.useState)(""),O=Object(z.a)(x,2),m=O[0],p=O[1],v=Object(h.useState)(!1),k=Object(z.a)(v,2),w=k[0],y=k[1],C=function(e){e.target.onerror=null,e.target.src=c};return Object(U.jsx)(g.GenericModal,{onClose:f,title:n,body:w?Object(U.jsx)(W,{children:i}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(N,{children:[Object(U.jsxs)(Q,{children:[Object(U.jsx)(g.Icon,{size:"md",type:"search"}),Object(U.jsx)(E,{onChange:function(e){return p(e.target.value)},placeholder:"Search",value:m})]}),Object(U.jsx)(g.Button,{size:"md",color:"primary",variant:"contained",onClick:function(){return y(!w)},children:Object(U.jsxs)(g.Text,{size:"lg",color:"white",children:["+ ",s]})})]}),Object(U.jsx)("div",{children:(m&&m.length?r.filter((function(e){var t;return e.name.toLowerCase().includes(m.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))})):r).map((function(e){return Object(U.jsxs)(G,{children:[Object(U.jsxs)(K,{children:[Object(U.jsx)(J,{alt:e.name,onError:C,src:e.iconUrl}),Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:Object(U.jsx)(g.Text,{size:"lg",strong:!0,children:e.name})}),Object(U.jsx)("div",{children:Object(U.jsx)(Z,{size:"md",children:e.description&&e.description})})]})]}),Object(U.jsx)(g.Switch,{checked:e.checked,onChange:function(t){return j(e.id,t)}}),o&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(H,{orientation:"vertical"}),Object(U.jsx)(q,{onClick:function(){return null===b||void 0===b?void 0:b(e.id)},disabled:!e.isDeletable,children:Object(U.jsx)(g.Icon,{size:"md",color:e.isDeletable?"error":"icon",type:"delete"})})]})]},e.id)}))})]}),footer:w?Object(U.jsx)(g.ModalFooterConfirmation,{okText:"Save",okDisabled:l,handleCancel:function(){return y(!1)},handleOk:function(){y(!1),u()}}):null,withoutBodyPadding:!0})},V=n(380),X=n(80),Y=n(199),$=n(41),_=n.n($),ee=function(){var e=Object(I.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new V.OpenSeaPort(new Y.a),e.next=3,Promise.all(t.map((function(e){return n.api.getAsset({tokenAddress:e.contractAddress,tokenId:e.id.toString()})})));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=e.tokens,n=Object(w.useQuery)(["loadTokenAssets",t],(function(){return ee(t)})),r=n.isLoading,o=n.data,c=n.error;if(r)return Object(U.jsx)(g.Loader,{size:"lg"});if(c)return alert(c),Object(U.jsx)(U.Fragment,{});if(void 0===o)throw new Error("data is undefined");var i=function(e){var t,n=_.a.minBy(e.sellOrders,(function(e){return e.basePrice.toNumber()}));return[{content:Object(U.jsx)(g.Text,{size:"lg",children:e.name})},{content:Object(U.jsxs)(g.Text,{size:"lg",children:["Price: \u039e",Object(X.b)(null!==(t=null===n||void 0===n?void 0:n.basePrice.toString())&&void 0!==t?t:"-1").toString()]})},{content:Object(U.jsx)("img",{src:e.imageUrl,alt:e.imageUrl})}]};return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(g.Table,{rows:o.map((function(e){var t;return{id:null!==(t=e.tokenId)&&void 0!==t?t:"",cells:i(e)}}))})})},ne=p.default.div(f||(f=Object(y.a)(["\n  padding: 1rem;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]))),re=function(){var e=Object(v.useSafeAppsSDK)(),t=e.sdk,n=e.safe,r=Object(h.useState)(!1),o=Object(z.a)(r,2),c=o[0],i=o[1],a=Object(h.useState)([]),s=Object(z.a)(a,2),d=s[0],l=s[1],u=Object(h.useState)(""),j=Object(z.a)(u,2),b=j[0],f=j[1],x=Object(h.useState)(""),O=Object(z.a)(x,2),m=O[0],p=O[1],k=Object(h.useState)(!1),w=Object(z.a)(k,2),y=w[0],C=w[1],T=Object(h.useCallback)(Object(I.a)(D.a.mark((function e(){var r,o,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),r=new F.a(Object(P.getDefaultProvider)()),e.next=5,Promise.all(d.map((function(e){return r.createSingleTokenPurchase(e.id,e.contractAddress,n.safeAddress)})));case 5:return o=e.sent,e.next=8,r.createBatchTransactionFromPurchases(o,n.safeAddress);case 8:return c=e.sent,C(!1),e.next=12,t.txs.send({txs:[{to:c.to,value:L.a.from(c.value).toString(),data:c.data}]});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[d,n,t]);return Object(U.jsxs)(ne,{children:[y&&Object(U.jsx)(g.Loader,{size:"lg"}),Object(U.jsx)(g.Title,{size:"md",children:"New Batch OpenSea Purchase"}),Object(U.jsx)(te,{tokens:d}),Object(U.jsx)(g.Button,{size:"lg",color:"primary",onClick:function(){return i(!c)},children:"Select NFTs"}),c&&Object(U.jsx)(R,{title:"Add Token",defaultIconUrl:"https://opensea.io/static/images/logos/opensea.svg",itemList:Array.from(d.entries()).map((function(e){var t=Object(z.a)(e,2),n=t[0],r=t[1];return{id:n,iconUrl:"someUrl",name:"".concat(r.id),description:"Token at ".concat(r.contractAddress),checked:!0,isDeletable:!0}})),showDeleteButton:!0,addButtonLabel:"Add token to batch",formBody:Object(U.jsx)(M,{tokenID:b,tokenContractAddress:m,onTokenIDChanged:f,onTokenContractAddressChanged:p}),onSubmitForm:function(){l([].concat(Object(B.a)(d),[{id:L.a.from(b),contractAddress:m}]))},onClose:function(){return i(!1)},onItemToggle:function(){},onItemDeleted:function(e){if("string"===typeof e)throw new Error("itemID ".concat(e," should be number"));var t=Object(B.a)(d);t.splice(e,1),l(t)}}),Object(U.jsx)(g.Divider,{}),Object(U.jsx)(g.Button,{size:"lg",color:"primary",onClick:T,children:"Construct Batch Transaction"})]})},oe=new w.QueryClient;m.a.render(Object(U.jsx)(x.a.StrictMode,{children:Object(U.jsxs)(p.ThemeProvider,{theme:g.theme,children:[Object(U.jsx)(S,{}),Object(U.jsx)(k.a,{loader:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(g.Title,{size:"md",children:"Waiting for Safe..."}),Object(U.jsx)(g.Loader,{size:"md"})]}),children:Object(U.jsx)(w.QueryClientProvider,{client:oe,children:Object(U.jsx)(re,{})})})]})}),document.getElementById("root"))}},[[757,1,2]]]);
//# sourceMappingURL=main.989b4e76.chunk.js.map