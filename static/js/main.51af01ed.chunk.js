(this["webpackJsonpopensea-batch-purchase-react"]=this["webpackJsonpopensea-batch-purchase-react"]||[]).push([[0],{435:function(e,t){},442:function(e,t){},464:function(e,t){},466:function(e,t){},478:function(e,t){},479:function(e,t){},494:function(e,t){},500:function(e,t){},503:function(e,t){},505:function(e,t){},518:function(e,t){},520:function(e,t){},757:function(e,t,n){"use strict";n.r(t);var r,o,c,i,a,s,d,l,u,j,b,f,h,x=n(0),O=n.n(x),m=n(36),p=n.n(m),g=n(49),v=n(34),k=n(221),w=n.n(k),y=n(180),C=n(57),T=n(376),A=n(377),S=Object(g.createGlobalStyle)(r||(r=Object(C.a)(["\n    html {\n        height: 100%\n    }\n\n    body {\n       height: 100%;\n       margin: 0px;\n       padding: 0px;\n    }\n\n    #root {\n        height: 100%;\n        padding-right: 0.5rem;\n    }\n\n    .MuiFormControl-root,\n    .MuiInputBase-root {\n        width: 100% !important;\n    }\n\n    @font-face {\n        font-family: 'Averta';\n        src: local('Averta'), local('Averta Bold'),\n        url(",") format('woff2'),\n        url(",") format('woff');\n    }\n"])),T.a,A.a),D=n(4),I=n.n(D),z=n(102),B=n(113),P=n(77),F=n(381),L=n(19),E=n(122),U=n(15),M=g.default.div(o||(o=Object(C.a)(["\n  padding: 1rem;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]))),N=function(e){var t=e.tokenID,n=e.tokenContractAddress,r=e.onTokenIDChanged,o=e.onTokenContractAddressChanged;return Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(M,{children:[Object(U.jsxs)(v.Text,{size:"lg",children:["Enter token ID (a number) and the token's contract address ",Object(U.jsx)("br",{}),"Ex: '0x059edd72cd353df5106d2b9cc5ab83a52287ac3a' for Artblocks"]}),Object(U.jsx)("br",{}),Object(U.jsx)(v.TextField,{id:"standard-name",label:"Token Contract Address",value:n,onChange:function(e){return o(e.target.value)},input:{type:"text",pattern:"[A-Za-z]{3}"}}),Object(U.jsx)("br",{}),Object(U.jsx)(v.TextField,{id:"standard-name",label:"Token ID",value:t,onChange:function(e){return r(e.target.value)},input:{type:"number",min:0}})]})})},_=g.default.input(c||(c=Object(C.a)(["\n  border: none;\n  background-color: transparent;\n  box-shadow: none;\n  font-family: ",";\n  width: 250px;\n\n  :focus {\n    outline: none;\n  }\n"])),(function(e){return e.theme.fonts.fontFamily})),K=g.default.div(i||(i=Object(C.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 2px solid ",";\n  padding: 0 24px;\n"])),(function(e){return e.theme.colors.separator})),Q=g.default.div(a||(a=Object(C.a)(["\n  display: flex;\n  align-items: center;\n  height: 52px;\n  border-right: 2px solid ",";\n"])),(function(e){return e.theme.colors.separator})),G=g.default.div(s||(s=Object(C.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 24px;\n  height: 51px;\n  border-bottom: 2px solid ",";\n\n  :last-child {\n    border-bottom: 0px;\n  }\n"])),(function(e){return e.theme.colors.separator})),J=g.default.img(d||(d=Object(C.a)(["\n  width: 26px;\n  height: 26px;\n  object-fit: contain;\n  margin: 0 16px 0 0;\n"]))),R=g.default.div(l||(l=Object(C.a)(["\n  display: flex;\n  align-items: center;\n"]))),W=g.default.div(u||(u=Object(C.a)(["\n  display: flex;\n  align-items: center;\n  padding: 24px;\n"]))),Y=Object(g.default)(v.Text)(j||(j=Object(C.a)(["\n  width: 350px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),Z=g.default.button(b||(b=Object(C.a)(["\n  background: none;\n  color: inherit;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  outline-color: ",";\n"])),(function(e){return e.theme.colors.separator})),q=Object(g.default)(v.Divider)(f||(f=Object(C.a)(["\n  height: 30px;\n"]))),H=function(e){var t=e.title,n=void 0===t?"Manage List":t,r=e.itemList,o=e.showDeleteButton,c=e.defaultIconUrl,i=e.formBody,a=e.addButtonLabel,s=void 0===a?"add":a,d=e.isSubmitFormDisabled,l=void 0!==d&&d,u=e.onSubmitForm,j=e.onItemToggle,b=e.onItemDeleted,f=e.onClose,h=Object(x.useState)(""),O=Object(P.a)(h,2),m=O[0],p=O[1],g=Object(x.useState)(!1),k=Object(P.a)(g,2),w=k[0],y=k[1],C=function(e){e.target.onerror=null,e.target.src=c};return Object(U.jsx)(v.GenericModal,{onClose:f,title:n,body:w?Object(U.jsx)(W,{children:i}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(K,{children:[Object(U.jsxs)(Q,{children:[Object(U.jsx)(v.Icon,{size:"md",type:"search"}),Object(U.jsx)(_,{onChange:function(e){return p(e.target.value)},placeholder:"Search",value:m})]}),Object(U.jsx)(v.Button,{size:"md",color:"primary",variant:"contained",onClick:function(){return y(!w)},children:Object(U.jsxs)(v.Text,{size:"lg",color:"white",children:["+ ",s]})})]}),Object(U.jsx)("div",{children:(m&&m.length?r.filter((function(e){var t;return e.name.toLowerCase().includes(m.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))})):r).map((function(e){return Object(U.jsxs)(G,{children:[Object(U.jsxs)(R,{children:[Object(U.jsx)(J,{alt:e.name,onError:C,src:e.iconUrl}),Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{children:Object(U.jsx)(v.Text,{size:"lg",strong:!0,children:e.name})}),Object(U.jsx)("div",{children:Object(U.jsx)(Y,{size:"md",children:e.description&&e.description})})]})]}),Object(U.jsx)(v.Switch,{checked:e.checked,onChange:function(t){return j(e.id,t)}}),o&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(q,{orientation:"vertical"}),Object(U.jsx)(Z,{onClick:function(){return null===b||void 0===b?void 0:b(e.id)},disabled:!e.isDeletable,children:Object(U.jsx)(v.Icon,{size:"md",color:e.isDeletable?"error":"icon",type:"delete"})})]})]},e.id)}))})]}),footer:w?Object(U.jsx)(v.ModalFooterConfirmation,{okText:"Save",okDisabled:l,handleCancel:function(){return y(!1)},handleOk:function(){y(!1),u()}}):null,withoutBodyPadding:!0})},V=n(380),X=n(80),$=n(199),ee=n(41),te=n.n(ee),ne=function(){var e=Object(z.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new V.OpenSeaPort(new $.a),e.next=3,Promise.all(t.map((function(e){return n.api.getAsset({tokenAddress:e.contractAddress,tokenId:e.id.toString()})})));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){var t=e.tokens,n=Object(y.useQuery)(["loadTokenAssets",t],(function(){return ne(t)})),r=n.isLoading,o=n.data,c=n.error;if(r)return Object(U.jsx)(v.Loader,{size:"lg"});if(c)return alert(c),Object(U.jsx)(U.Fragment,{});if(void 0===o)throw new Error("data is undefined");var i=function(e){var t,n=te.a.minBy(e.sellOrders,(function(e){return e.basePrice.toNumber()}));return[{content:Object(U.jsx)(v.Text,{size:"lg",children:e.name})},{content:Object(U.jsxs)(v.Text,{size:"lg",children:["Price: \u039e",Object(X.b)(null!==(t=null===n||void 0===n?void 0:n.basePrice.toString())&&void 0!==t?t:"-1").toString()]})},{content:Object(U.jsx)("img",{src:e.imageUrl,alt:e.imageUrl})}]};return Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(v.Table,{rows:o.map((function(e){var t;return{id:null!==(t=e.tokenId)&&void 0!==t?t:"",cells:i(e)}}))})})},oe=g.default.div(h||(h=Object(C.a)(["\n  padding: 1rem;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]))),ce=function(){var e=Object(k.useSafeAppsSDK)(),t=e.sdk,n=e.safe,r=Object(x.useState)(!1),o=Object(P.a)(r,2),c=o[0],i=o[1],a=Object(x.useState)([]),s=Object(P.a)(a,2),d=s[0],l=s[1],u=Object(x.useState)(""),j=Object(P.a)(u,2),b=j[0],f=j[1],h=Object(x.useState)(""),O=Object(P.a)(h,2),m=O[0],p=O[1],g=Object(x.useState)(!1),w=Object(P.a)(g,2),y=w[0],C=w[1],T=Object(x.useCallback)(Object(z.a)(I.a.mark((function e(){var r,o,c,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,C(!0),r="6c2cf7754b5e4819be2c0e3827382766"){e.next=5;break}throw new Error("must define REACT_APP_OPENSEA_API_KEY");case 5:return o=new F.a(Object(E.getDefaultProvider)(),{openseaApiKey:r}),e.next=8,Promise.all(d.map((function(e){return o.createSingleTokenPurchase(e.id,e.contractAddress,n.safeAddress)})));case 8:return c=e.sent,e.next=11,o.createBatchTransactionFromPurchases(c,n.safeAddress);case 11:return i=e.sent,C(!1),e.next=15,t.txs.send({txs:[{to:i.to,value:L.a.from(i.value).toString(),data:i.data}]});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])}))),[d,n,t]);return Object(U.jsxs)(oe,{children:[y&&Object(U.jsx)(v.Loader,{size:"lg"}),Object(U.jsx)(v.Title,{size:"md",children:"New Batch OpenSea Purchase"}),d.length>0&&Object(U.jsx)(v.Card,{children:Object(U.jsx)(re,{tokens:d})}),Object(U.jsx)(v.Button,{size:"lg",color:"primary",onClick:function(){return i(!c)},children:"1. Select NFTs"}),c&&Object(U.jsx)(H,{title:"Add Token",defaultIconUrl:"https://opensea.io/static/images/logos/opensea.svg",itemList:Array.from(d.entries()).map((function(e){var t=Object(P.a)(e,2),n=t[0],r=t[1];return{id:n,iconUrl:"someUrl",name:"".concat(r.id),description:"Token at ".concat(r.contractAddress),checked:!0,isDeletable:!0}})),showDeleteButton:!0,addButtonLabel:"Add token to batch",formBody:Object(U.jsx)(N,{tokenID:b,tokenContractAddress:m,onTokenIDChanged:f,onTokenContractAddressChanged:p}),onSubmitForm:function(){l([].concat(Object(B.a)(d),[{id:L.a.from(b),contractAddress:m}]))},onClose:function(){return i(!1)},onItemToggle:function(){},onItemDeleted:function(e){if("string"===typeof e)throw new Error("itemID ".concat(e," should be number"));var t=Object(B.a)(d);t.splice(e,1),l(t)}}),Object(U.jsx)(v.Divider,{}),Object(U.jsx)(v.Button,{size:"lg",color:"primary",onClick:T,children:"2. Construct Batch Transaction"})]})},ie=new y.QueryClient;p.a.render(Object(U.jsx)(O.a.StrictMode,{children:Object(U.jsxs)(g.ThemeProvider,{theme:v.theme,children:[Object(U.jsx)(S,{}),Object(U.jsx)(w.a,{loader:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(v.Title,{size:"md",children:"Waiting for Safe..."}),Object(U.jsx)(v.Loader,{size:"md"})]}),children:Object(U.jsx)(y.QueryClientProvider,{client:ie,children:Object(U.jsx)(ce,{})})})]})}),document.getElementById("root"))}},[[757,1,2]]]);
//# sourceMappingURL=main.51af01ed.chunk.js.map